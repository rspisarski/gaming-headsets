---
import { VALID_FEATURES } from '../lib/features.ts';

interface Props {
  brands: string[];
  initialCount: number;
}

const { brands, initialCount } = Astro.props as Props;
---

<div>
   <h2 class="text-2xl font-semibold mb-6 text-dark-text-primary">Find Your Perfect Headset</h2>
   <p class="text-dark-text-secondary mb-6">Click on features below to select them as "Must Have" or "Nice to Have". Must have features are required for matches, nice to have features improve your score.</p>

   <!-- Must Have & Nice to Have Sections -->
   <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <!-- Must Have Features -->
      <div class="must-have-zone rounded-xl p-6 min-h-96">
         <h3 class="text-lg font-semibold mb-4 text-soft-periwinkle-300 border-b-2 border-soft-periwinkle-600/50 pb-2 flex items-center">
            <span class="text-2xl mr-2">‚ù§Ô∏è</span>
            Must Have Features
            <span class="text-sm font-normal text-soft-periwinkle-400 ml-2 bg-dark-surface px-2 py-1 rounded-full border border-dark-border">(<span id="must-have-count">0</span> selected)</span>
         </h3>

         <div id="must-have-features" class="flex flex-wrap gap-2">
            <!-- Features will be added here via JavaScript -->
            <div class="text-dark-text-muted text-sm italic text-center py-8 w-full">
               Click features below to add as must-have requirements
            </div>
         </div>
      </div>

      <!-- Nice to Have Features -->
      <div class="nice-to-have-zone rounded-xl p-6 min-h-96">
         <h3 class="text-lg font-semibold mb-4 text-frozen-lake-300 border-b-2 border-frozen-lake-600/50 pb-2 flex items-center">
            <span class="text-2xl mr-2">üëç</span>
            Nice to Have Features
            <span class="text-sm font-normal text-frozen-lake-400 ml-2 bg-dark-surface px-2 py-1 rounded-full border border-dark-border">(<span id="nice-to-have-count">0</span> selected)</span>
         </h3>

         <div id="nice-to-have-features" class="flex flex-wrap gap-2">
            <!-- Features will be added here via JavaScript -->
            <div class="text-dark-text-muted text-sm italic text-center py-8 w-full">
               Click features below to add as nice-to-have preferences
            </div>
         </div>
      </div>
   </div>

   <!-- Available Features -->
   <div class="rounded-xl p-6 shadow-sm bg-dark-surface/50">
      <h3 class="text-lg font-semibold mb-4 text-dark-text-primary border-b border-dark-border pb-2 flex items-center">
         Available Features
         <span class="text-sm font-normal text-dark-text-secondary ml-2 bg-dark-surface px-2 py-1 rounded-full border border-dark-border">(Click to select)</span>
      </h3>

      <!-- 1. Connectivity & Wireless -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üîå</span> Connectivity & Wireless
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Connection Types</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.CONNECTION_TYPES.map((type: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="connection_types"
                          data-value={type}
                        >
                         {type}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Charging & Range</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.CHARGING_TYPES.map((type: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="charging_type"
                          data-value={type}
                        >
                         {type}
                      </div>
                     ))}
                     {VALID_FEATURES.WIRELESS_RANGES.map((range: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="wireless_range"
                          data-value={range}
                        >
                         {range}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Wireless Features</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.WIRELESS_FEATURES.map((feature: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="wireless_features"
                          data-value={feature}
                        >
                         {feature}
                      </div>
                     ))}
                  </div>
               </div>
            </div>
         </div>
      </details>

      <!-- 2. Platform Compatibility -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üéÆ</span> Platform Compatibility
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="flex flex-wrap gap-1">
               {VALID_FEATURES.PLATFORMS.map((platform: string) => (
                  <div
                    class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                   data-state="none"
                    data-feature="platforms"
                    data-value={platform}
                  >
                   {platform}
                 </div>
               ))}
            </div>
         </div>
      </details>

      <!-- 3. Audio Specifications -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üéµ</span> Audio Specifications
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Driver Type</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.DRIVER_TYPES.map((type: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="driver_types"
                          data-value={type}
                        >
                         {type}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Surround Sound</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.SURROUND_SOUND.map((sound: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="surround_sound"
                          data-value={sound}
                        >
                         {sound}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Headphone Type</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.HEADPHONE_TYPES.map((type: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="headphone_types"
                          data-value={type}
                        >
                         {type}
                      </div>
                     ))}
                  </div>
               </div>
            </div>
         </div>
      </details>

      <!-- 4. Microphone Features -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üé§</span> Microphone Features
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Microphone Type</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.MICROPHONE_TYPES.map((type: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="microphone_types"
                          data-value={type}
                        >
                         {type}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Pickup Pattern</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.PICKUP_PATTERNS.map((pattern: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="pickup_patterns"
                          data-value={pattern}
                        >
                         {pattern}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Microphone Features</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.MICROPHONE_FEATURES.map((feature: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="microphone_features"
                          data-value={feature}
                        >
                         {feature}
                      </div>
                     ))}
                  </div>
               </div>
            </div>
         </div>
      </details>

      <!-- 5. Comfort & Build -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üõãÔ∏è</span> Comfort & Build
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Ear Cup Design</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.EAR_CUP_DESIGNS.map((design: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="ear_cup_designs"
                          data-value={design}
                        >
                         {design}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Cushion Material</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.CUSHION_MATERIALS.map((material: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="cushion_materials"
                          data-value={material}
                        >
                         {material}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Build Materials</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.BUILD_MATERIALS.map((material: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="build_materials"
                          data-value={material}
                        >
                         {material}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Comfort Features</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.COMFORT_FEATURES.map((feature: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="comfort_features"
                          data-value={feature}
                        >
                         {feature}
                      </div>
                     ))}
                  </div>
               </div>
            </div>
         </div>
      </details>

      <!-- 6. Advanced Features -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">‚ö°</span> Advanced Features
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Active Features</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.ACTIVE_FEATURES.map((feature: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="active_features"
                          data-value={feature}
                        >
                         {feature}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">RGB Lighting</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.RGB_LIGHTING.map((rgb: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="rgb_lighting"
                          data-value={rgb}
                        >
                         {rgb}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Special Features</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.SPECIAL_FEATURES.map((feature: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="special_features"
                          data-value={feature}
                        >
                         {feature}
                      </div>
                     ))}
                  </div>
               </div>
            </div>
         </div>
      </details>

      <!-- 7. Software & Customization -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üñ•Ô∏è</span> Software & Customization
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Software Features</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.SOFTWARE_FEATURES.map((feature: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="software_features"
                          data-value={feature}
                        >
                         {feature}
                      </div>
                     ))}
                  </div>
               </div>
               <div class="feature-subcategory">
                  <h5 class="font-medium mb-2 text-xs text-dark-text-muted">Software Apps</h5>
                  <div class="flex flex-wrap gap-1">
                     {VALID_FEATURES.SOFTWARE_APPS.map((app: string) => (
                        <div
                          class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                         data-state="none"
                          data-feature="software_apps"
                          data-value={app}
                        >
                         {app}
                      </div>
                     ))}
                  </div>
               </div>
            </div>
         </div>
      </details>

      <!-- 8. Price Categories -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üí∞</span> Price Categories
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="flex flex-wrap gap-1">
               {VALID_FEATURES.PRICE_CATEGORIES.map((category: string) => (
                  <div
                    class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                   data-state="none"
                    data-feature="price_categories"
                    data-value={category}
                  >
                   {category}
                 </div>
               ))}
            </div>
         </div>
      </details>

      <!-- 9. Brands -->
      <details class="feature-category bg-dark-surface border border-dark-border rounded-lg overflow-hidden mb-4">
         <summary class="px-4 py-3 cursor-pointer hover:bg-dark-bg transition-colors font-medium text-sm uppercase text-dark-text-secondary tracking-wide flex items-center">
            <span class="mr-2">üè∑Ô∏è</span> Brands
            <svg class="ml-auto w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
         </summary>
         <div class="p-4 border-t border-dark-border">
            <div class="flex flex-wrap gap-1">
               {brands.map((brand: string) => (
                  <div
                    class="feature-item px-2 py-1 border rounded-full cursor-pointer transition-all duration-200 text-xs text-center font-medium"
                   data-state="none"
                    data-feature="brand"
                    data-value={brand}
                  >
                   {brand}
                 </div>
               ))}
            </div>
         </div>
      </details>
   </div>

   <!-- Action Buttons and Result Info -->
   <div class="mt-8 mb-8 flex flex-col md:flex-row gap-4 justify-between items-center bg-dark-card p-4 rounded-xl border border-dark-border shadow-sm">
      <div class="flex gap-3 w-full md:w-auto">
         <button
            id="find-matches"
            class="flex-1 md:flex-none px-8 py-3 bg-gradient-to-r from-soft-periwinkle-600 to-mauve-600 text-white rounded-lg hover:from-soft-periwinkle-700 hover:to-mauve-700 transition-all duration-200 font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
         >
            <span class="mr-2">üîç</span>
            Find Matches
         </button>
         <button
            id="clear-features"
            class="flex-1 md:flex-none px-6 py-3 bg-dark-surface text-dark-text-primary rounded-lg border border-dark-border hover:bg-dark-bg transition-all duration-200 shadow-sm hover:shadow-md"
         >
            <span class="mr-2">üóëÔ∏è</span>
            Clear All
         </button>
      </div>

      <p class="text-dark-text-secondary mt-4 md:mt-0 font-medium">
         Showing <span id="results-count" class="text-dark-text-primary font-bold text-lg">{initialCount}</span> headsets
      </p>
   </div>
</div>

<style is:global>

    .feature-item {
      background-color: var(--soft-periwinkle-800);
      border-color: var(--soft-periwinkle-600);
      color: var(--dark-text-primary);
      transition: filter 0.2s ease;
    }
    .feature-item:hover {
      filter: brightness(1.1);
    }
    .feature-item.state-must {
      background: linear-gradient(135deg, var(--soft-periwinkle-600) 0%, var(--mauve-600) 100%);
      color: white;
      border-color: var(--soft-periwinkle-700);
    }
    .feature-item.state-nice {
      background: linear-gradient(135deg, var(--frozen-lake-600) 0%, var(--frozen-lake-500) 100%);
      color: white;
      border-color: var(--frozen-lake-700);
    }

    .must-have-zone {
      background: transparent;
    }
    .nice-to-have-zone {
      background: transparent;
    }

    /* Details/Summary Accordion Styles */
    details {
      border-radius: 0.5rem;
      overflow: hidden;
    }

    summary {
      list-style: none;
      cursor: pointer;
      transition: background-color 0.2s ease;
      padding: 1rem;
      border-bottom: 1px solid var(--dark-border);
    }

    summary:hover {
      background-color: var(--dark-bg);
    }

    summary::-webkit-details-marker {
      display: none;
    }

    summary::after {
      content: '';
      display: inline-block;
      width: 0.5rem;
      height: 0.5rem;
      margin-left: auto;
      border-right: 2px solid var(--dark-text-secondary);
      border-bottom: 2px solid var(--dark-text-secondary);
      transform: rotate(45deg);
      transition: transform 0.2s ease;
    }

    details[open] summary::after {
      transform: rotate(225deg);
    }

    details > div {
      padding: 1rem;
      border-top: 1px solid var(--dark-border);
    }
</style>

<script>
    // Style features when they're moved to must-have/nice-to-have zones
    document.addEventListener('DOMContentLoaded', function() {
      function styleMovedFeatures() {
        // Style features in must-have zone - add state-must class to trigger existing CSS
        const mustHaveItems = document.querySelectorAll('#must-have-features .feature-item');
        mustHaveItems.forEach(item => {
          if (item instanceof HTMLElement) {
            item.classList.remove('state-must', 'state-nice');
            item.classList.add('state-must');
          }
        });

        // Style features in nice-to-have zone - add state-nice class to trigger existing CSS
        const niceToHaveItems = document.querySelectorAll('#nice-to-have-features .feature-item');
        niceToHaveItems.forEach(item => {
          if (item instanceof HTMLElement) {
            item.classList.remove('state-must', 'state-nice');
            item.classList.add('state-nice');
          }
        });

        // Hide placeholder text when features are present
        const mustHaveContainer = document.getElementById('must-have-features');
        const niceToHaveContainer = document.getElementById('nice-to-have-features');

        if (mustHaveContainer && mustHaveContainer.querySelectorAll('.feature-item').length > 0) {
          const placeholder = mustHaveContainer.querySelector('.text-dark-text-muted');
          if (placeholder) placeholder.style.display = 'none';
        }

        if (niceToHaveContainer && niceToHaveContainer.querySelectorAll('.feature-item').length > 0) {
          const placeholder = niceToHaveContainer.querySelector('.text-dark-text-muted');
          if (placeholder) placeholder.style.display = 'none';
        }
      }

      // Initial styling and watch for changes
      styleMovedFeatures();

      // Observer for DOM changes (when features are added/removed)
      const observer = new MutationObserver(styleMovedFeatures);
      const mustHaveElement = document.getElementById('must-have-features');
      const niceToHaveElement = document.getElementById('nice-to-have-features');

      if (mustHaveElement) {
        observer.observe(mustHaveElement, { childList: true });
      }
      if (niceToHaveElement) {
        observer.observe(niceToHaveElement, { childList: true });
      }
    });
</script>