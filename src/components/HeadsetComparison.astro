---
import { getEntry } from "astro:content";
import HeadsetCard from "./HeadsetCard.astro";

interface Props {
    leftId: string;
    rightId: string;
    ctaType?: "details" | "amazon";
}

const { leftId, rightId, ctaType = "details" } = Astro.props;

const leftHeadset = await getEntry("headsets", leftId as any);
const rightHeadset = await getEntry("headsets", rightId as any);
---

{
    !leftHeadset || !rightHeadset ? (
        <div class="p-4 bg-red-900/20 border border-red-500 rounded-xl text-red-200 my-12">
            Error: Could not find headset with ID "
            {!leftHeadset ? leftId : rightId}"
        </div>
    ) : (
        <div class="my-12 grid grid-cols-1 md:grid-cols-2 gap-8 not-prose">
            {/* Left Headset */}
            <HeadsetCard
                headset={{ ...leftHeadset.data, slug: leftHeadset.slug }}
                ctaType={ctaType}
            />

            {/* Right Headset */}
            <HeadsetCard
                headset={{ ...rightHeadset.data, slug: rightHeadset.slug }}
                ctaType={ctaType}
            />
        </div>
    )
}
